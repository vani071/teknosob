title = "Category"
url = "/category/:slug/:page?"
layout = "Teknosob"
is_hidden = 0
robot_index = "index"
robot_follow = "follow"

[blogPosts]
pageNumber = "{{ :page }}"
categoryFilter = "{{ :slug }}"
postsPerPage = 10
noPostsMessage = "No posts found"
sortOrder = "published_at desc"
categoryPage = "cat"
postPage = "article"
==
<?php
function onEnd()
{
    if ($this->category)
        $this->page->meta_title = $this->category->name.' terkini - Teknosob.com';
}
?>
==
{% set posts = blogPosts.posts %}

<ul class="list-group post-list-custom pagination-container pagination-data">
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-1">

    {% for post in posts %}
      <li class="list-group-item border-0">
        <div class="row row-cols-1 row-cols-lg-2">
          <div class="col col-lg-3">
            <!-- Post Image -->
            {% for image in post.featured_images|slice(0,1) %}
              <div class="cp-thumb" onclick="location.href = '{{ post.url }}';"><img src="{{image.path}}" alt=""></div>
            {% endfor %}
          </div>

          <div class="col col-lg-9">
            <!-- Post Date -->
            <p class="info d-none d-lg-block">
              {{ post.published_at|date(' d M Y') }}
            </p>

            <!-- Post Title -->
            <h3><a href="{{ post.url }}">{{ post.title|title }}</a></h3>

            <!-- Post Excerpt -->
            <p class="excerpt d-none d-lg-block">
              {{ post.summary|raw }}
            </p>
          </div>
        </div>
      </li>

    {% else %}
      <li class="no-data">{{ blogPosts.noPostsMessage }}</li>
    {% endfor %}

  </div>
</ul>

<ul class="list-group post-list-custom status-infinite">
    <li class="list-group-item infinite-scroll-last"></li>
    <li class="list-group-item infinite-scroll-request text-center" > <img src="{{ 'assets/ajax-loader.gif'|theme }}" alt="loading"></li>
    <li class="list-group-item infinite-scroll-error text-center">Tidak ada data</li>
</ul>

<div class="pagination">
    <a class="pagination__next" href="{{url('/')}}/category/{{ category.slug }}/2">Next page</a>
</div>

<!-- Infinite Pagination Plugin -->
<script src="https://unpkg.com/infinite-scroll@3/dist/infinite-scroll.pkgd.min.js"></script>
<script>
/**
 * Infinite Pagination Plugin
 */
var elem = document.querySelector('.pagination-container');
var infScroll = new InfiniteScroll(elem, {
    // options
    path: '.pagination__next',
    append: '.pagination-data',
    prefill: true,
    history: false,
    hideNav: '.pagination',
    status: '.status-infinite',
});
</script>